patch is same with buggy,,while (i < max) { ,while(i < max) {
